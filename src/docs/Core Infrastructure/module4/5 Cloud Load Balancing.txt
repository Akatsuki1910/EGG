仮想マシンが負荷の変化に応じて自動スケーリングする仕組みは前に解説しました
しかしある時は４台の、またある時は40台のVMが提供するアプリを利用する仕組みはどうなっているのでしょうか
Cloud Load Balancingの出番です
ロードバランサの役目はトラフィックを複数のアプリインスタンスに配分することです
負荷が分散することでパフォーマンス関連の問題のリスクが減ります
Cloud Load Balancingは、トラフィックを選ばない完全分散型のソフトウェア定義マネージドサービスです
ロードバランサはVMで実行されるのではないためスケーリングや管理の心配は無用です
Cloud Load Balancingは、HTTPまたはHTTPS、その他TCP、SSL、UDPの各種トラフィックに対応します
Load Balancingは、リージョン間の負荷分散を実現します
たとえば自動フェイルオーバー機能により、問題発生時にトラフィックを分割してスムーズに移動します
Cloud Load Balancingは高い即応性で、ユーザー、トラフィック、ネットワーク、バックエンドその他の状況の変化に対応します
需要が急増する場合はどうでしょうか
オンラインゲームがヒットした場合、Googleのサポートに負荷の増加を予告するべきでしょうか
答えはノーで、いわゆる“事前警告”は不要です
VPCには一連の負荷分散オプションがあります
ウェブアプリでリージョン間の負荷分散が必要ならグローバルHTTP負荷分散を使います
HTTP以外のSSLトラフィックには、グローバルSSLプロキシロードバランサです
SSLを使わないその他のTCPトラフィックなら、グローバルTCPプロキシロードバランサです
最後の２つのプロキシサービスは、特定のポート番号に対してTCP限定で機能します
UDPトラフィックまたは、任意のポート番号のトラフィックについては、リージョナルロードバランサで、リージョン全体の負荷分散を行えます
最後に、これらのサービスはどれも外部からGoogleネットワークへのトラフィック向けです
ではプロジェクト内部のトラフィックの場合、たとえばプレゼンテーション層とビジネス層の間の負荷分散はどうなるでしょう
リージョナル内部ロードバランサを使います
Google Cloudの内部IPアドレス上のトラフィックに対応し、Compute Engine VM全体で負荷を分散してくれます
