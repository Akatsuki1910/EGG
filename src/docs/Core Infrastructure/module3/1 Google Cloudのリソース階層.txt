このセクションでは、Google Cloudの機能の構造を説明します
Google Cloudのリソース階層には４つのレベルがあり、下から、リソース、プロジェクト、フォルダ、組織ノードです
最初のレベルはリソースです VM、Cloud Storageバケット、BigQueryのテーブルなど、Google Cloudのすべてのリソースがあります
リソースは第２レベルのプロジェクトにまとめられます
プロジェクトはフォルダ、またはサブフォルダにまとめられ、それが第３レベルです
最上位が組織ノードです
組織内のすべてのプロジェクト、フォルダ、リソースが含まれます
このリソース階層を知ることが重要です
Google Cloudのポリシーの管理と適用方法に関連するからです
ポリシーはプロジェクト、フォルダ、組織ノードの各レベルで定義できます
一部のGoogle Cloudサービスではリソースごとにもポリシーを適用できます
ポリシーは下位に継承され、フォルダに適用されたポリシーがそのフォルダの全プロジェクトに適用されます
リソース階層の第２レベルであるプロジェクトを見ていきましょう
プロジェクトはCloudサービスを使用するための基礎で、API管理、課金の有効化、協力者の追加と削除、他のGoogleサービスの有効化などを行えます
各プロジェクトは組織ノードの下の独立したエンティティで、各リソースは１つのプロジェクトだけに属します
プロジェクトは個別に課金および管理されるため、異なるオーナーとユーザーを設定できます
Google Cloudプロジェクトは、プロジェクトID、プロジェクト名、プロジェクト番号という３つの属性で識別されます
プロジェクトIDはGoogleが割り当てた一意のIDで、作成後に変更できません
つまり不変です
プロジェクトIDはさまざまな状況で使用され、Google Cloudに対象のプロジェクトを知らせます
プロジェクト名はユーザーが作成します
一意にする必要はなくいつでも変更でき、不変ではありません
プロジェクトには一意のプロジェクト番号も割り当てられます
番号の存在を知っていると便利ですがこのコースでは詳しく説明しません
主にGoogle Cloudが内部でリソース管理に使用します
リソースマネージャーツールはプロジェクトをプログラムで管理するためのものです
これはAPIで、アカウントに関連するプロジェクトの全リストの収集、プロジェクトの新規作成、既存プロジェクトの更新、プロジェクトの削除などが可能です
削除されたプロジェクトの復元も可能です
RPC APIやREST APIを使用してアクセスできます
リソースの第３レベルはフォルダです
フォルダでは選択した粒度でリソースにポリシーを割り当てられます
フォルダ内のリソースはそのフォルダのポリシーと権限を継承します
フォルダにはプロジェクトや他のフォルダを格納できます
フォルダを使うと、組織のプロジェクトを階層的にグループ化できます
たとえば組織に複数の部門があり、各部門が独自のリソースセットを使用している場合、フォルダを使用することでリソースを部門別にグループ化できます
チームはフォルダを使用して管理権限を委任し、別々に作業できます
前述のとおりフォルダ内のリソースはフォルダのポリシーと権限を継承します
たとえば、同じチームが管理する２つの異なるプロジェクトがある場合、共通フォルダにポリシーを設定することで両方に同じ権限を付与できます
ポリシーを複製して２つのプロジェクトに配置する方法では手間がかかり、エラーが発生しやすくなります
両方のリソースの権限を変更するには２つの場所で変更する必要があります
フォルダを使用するには組織ノードが必要で、これはGoogle Cloud階層の最上位リソースです
プロジェクトやフォルダなど、アカウントに関連する他のすべてのリソースはこのノードに配置されます
最上位の組織ノードに関連付けられた特別なロールがあります
たとえば組織ポリシー管理者を指定すると、権限を持つユーザーだけがポリシーを変更できます
プロジェクト作成者ロールを割り当てると、プロジェクトを作成して経費を使うユーザーを管理できます
新しい組織ノードの作成方法はGoogle Workspaceの使用の有無で変わります
Workspaceドメインがある場合はプロジェクトは自動的に組織ノードに属します
ドメインがない場合はCloud Identityを使用できます
これはGoogleのID、アクセス、アプリ、エンドポイント管理プラットフォームです
組織ノードを作成すると、ドメイン内の全ユーザーがプロジェクトや請求先アカウントを作成できるようになります
その下にフォルダを作成し、プロジェクトを置くこともできます
フォルダとプロジェクトはどちらも組織ノードの子となります
