ロールについてもう少し説明しましょう
ロールはIAMのアクションと対象リソースを定義します
Cloud IAMのロールは３種類あります
基本ロール、事前定義ロール、カスタムロールです
基本ロールはCloud Consoleに元々用意されているロールですが、その範囲は多岐にわたります
Google Cloudプロジェクトに適用すると、そのプロジェクト内のすべてのリソースに影響します
つまりIAMの基本ロールは、固定的で大まかなレベルのアクセス権を提供します
基本ロールにはオーナー、編集者、閲覧者のロールがあります
オーナーには完全な管理者権限があります
これにはメンバーの追加と削除、プロジェクトの削除などの権限が含まれます
編集者ロールにはアクセスの変更と削除の権限があります
これにより開発者はアプリをデプロイし、そのリソースを変更、構成できます
閲覧者ロールには読み取り専用の権限があります
これらのロールは同心構造です
つまりオーナーロールには、編集者ロールの権限が含まれ、編集者ロールには、閲覧者ロールの権限が含まれます
請求管理者ロールもあります
これは請求の管理、管理者の追加、削除を行うロールで
プロジェクト内のリソースを変更する権限はありません
各プロジェクトには複数のオーナー、編集者、閲覧者、請求管理者を設定できます
GCPサービスには独自の事前定義ロールのセットが用意されており、それらのロールを適用できる対象が定義されています
これにより特定のGCPリソースに対するアクセス権を詳細に設定できるため、他のリソースへの不正なアクセスを防げます
これらのロールは複数の権限のコレクションです
通常意味のある操作を行うには、複数の権限が必要になるからです
この図の例では、ユーザーグループに対してproject_aのインスタンス管理者ロールが付与されています
そのためこのグループのユーザーは、右のリストに示すCompute Engineのすべての権限（あるいはそれ以上）を持ちます
権限を１つのロールにグループ化することで、管理が容易になります
権限自体はAPIのクラスとメソッドに相当します
たとえばcompute.instances.startは、サービス、リソース、動詞に分解でき、停止したCompute Engineインスタンスを、起動するために使用される権限であることを表しています
通常これらの権限はREST APIに対応するアクションと連携しています
Compute Engineには事前定義されたIAMロールがいくつかあります
そのうちの３つを見てみましょう
Compute管理者ロールでは、すべてのCompute Engineリソースを完全に制御できます
このロールにはcompute.で始まるすべての権限があるので、あらゆる種類のCompute Engineリソースに対する全アクションが許可されます
ネットワーク管理者ロールには、ネットワークリソースを作成、変更、削除する権限が含まれます
例外として、ファイアウォールルールとSSL証明書にはこれらの権限は適用されません
ただし、エフェメラルIPアドレス表示のために、読み取り専用でファイアウォールルール、SSL証明書、インスタンスにアクセスすることができます
ストレージ管理者ロールには、ディスク、イメージ、スナップショットを作成、変更、削除する権限が含まれます
たとえばプロジェクトのイメージを管理する担当者に、プロジェクトの編集者ロールを付与したくない場合には、担当者のアカウントにそのプロジェクトのストレージ管理者ロールを付与します
Compute Engineの事前定義の全リストについては、スライドのリンクセクションをご覧ください
ロールとは抽象的な機能を表すもので、実際の業務に合わせてカスタマイズされています
しかしロールに権限が不足している場合や、より細かいロールが必要な場合はどうすればよいでしょうか
こういった場合に使用するのが、カスタムロールです
多くの企業では最小権限モデルを採用しています
つまり組織内の各ユーザーには、職務に必要な最小限の権限しか与えられません
たとえば、インスタンスオペレーターロールを定義して、一部のユーザーにCompute EngineのVMの起動と停止の権限を付与する一方、再構成はできないようにする場合などにカスタムロールを使用できます
