プロジェクトの全リソースの消費量は１つの請求先アカウントに累積されるので、課金について説明します
プロジェクトでの費用の計画と管理のため、予算を設定できます
予算を設定するとその金額に対して、利用額がどの程度増えているかを追跡できます
これは予算作成のインターフェースです
まず予算名を設定して、適用するプロジェクトを指定します
次に予算を特定の金額に設定するか、前月の利用額に合わせます
予算額を決定したら、予算のアラートを設定できます
利用額が予算の一定割合または指定額を超えると、請求管理者にメールでアラートが送信されます
この例では利用額が予算の50%、90%、100%に達した場合にメールが送信されます
予算期間終了までに利用額が予算の一定割合を超えると予測された時点で、アラートを送信することもできます
メール通知のほか、Cloud Pub/Sub通知を使用して、この予算に関する利用額の最新情報をプログラムで受け取ることもできます
Pub/SubトピックをリッスンするCloud Functions関数を作成して、費用管理を自動化することも可能です
プログラムによる通知例についてはこの動画のリンクセクションをご覧ください
これはメール通知の例です
このメールにはプロジェクト名、予算の超過割合、予算額が示されます
GCPの利用額を最適化するもう一つの方法はラベルを使用することです
たとえば複数のリージョンに分散しているVMインスタンスにラベルを設定します
これらのインスタンスが、トラフィックの大部分を別の大陸に送信している場合、費用が高額になる可能性があります
この場合は一部のインスタンスを再配置するか、Cloud CDNなどのキャッシュサービスを使用して、コンテンツをユーザーの近くにキャッシュすると、ネットワーキングの費用を削減できます
すべてのリソースにラベルを設定し、課金データをBigQueryにエクスポートして費用を分析することをおすすめします
BigQueryはGoogleが提供するスケーラブルでフルマネージドのエンタープライズ向けデータウェアハウスです
SQLで迅速な応答を実現しています
クエリはこの図のように簡単に作成できます
詳しくは後のラボで説明します
データポータルを使用して、一定期間の利用額を可視化することも可能です
データがわかりやすいダッシュボードやレポートの形式に変換され、簡単に共有したり自由にカスタマイズしたりできます
たとえばラベルを使用して請求レポートを詳細に分析できます
