次のラボではエクスポートされた課金データを検証しますので、ここでは課金データのエクスポート方法を紹介し、請求管理者が行う他の一般的な操作を実演します
セキュリティ制限によりQwiklabs環境では、これらの操作を行えないため、デモで説明していきます
GCP Consoleの画面です
[お支払い]に移動します
[ナビゲーションメニュー]>[お支払い]をクリックします
[概要]が表示されます
今回使用しているのは、トライアルアカウントですが、どのアカウントでも考え方は同じです
今月の使用量を確認できます
このアカウントには、プロモーションクレジットが適用されています
請求先アカウントが複数ある場合は、上部で選択できます
クレジットのほかに、請求先アカウント名も表示されています
[お支払いの概要]では、現在選択されているお支払い方法を確認できます
予算とアラートの設定も重要な操作です
[予算とアラート]>[予算を作成]をクリックします
まずは名前を付けます
My Budget Alertとしましょう
このアラートを適用するプロジェクトを選択します
１つだけでも複数でも構いません
[次へ]をクリックしてから、予算タイプを指定します
金額を指定するか先月の利用額を適用できます
先月の利用額を選択した場合は、その額がここに入力されます
このデモでは、目標金額を500ドルに設定しましょう
この費用にはクレジットが含まれますが、無効にすることもできます
次にアラートのしきい値を定義します
これはデフォルトで、50%、90%、100%に設定されており、先ほど指定した500に基づく金額が入力されています
さらに[実値]と[予測]のいずれかを選択できます
予測についての説明はこちらで確認できます
これらは削除可能です
25%のしきい値を追加すれば、より早くアラートを受け取れます
さらにCloud Pub/Subトピックを関連付けて、スライドで説明したさまざまな自動化を行うこともできます
[終了]をクリックします
これで予算に関するメールが届くようになります
こちらにはすでに消費された費用が表示されます
いつでもこのページにアクセスして、25%に近づいていないかを確認できます
もう一つ注目すべきは、[トランザクション]のページです
このページには各種料金がすべて表示されます
クレジットがあるので、料金はすべて相殺されていますが、Compute Engineインスタンスのさまざまな使用状況や、使用しているディスク容量を確認できます
またこの情報はすべてエクスポート可能です
[課金データのエクスポート]をクリックすると、BigQueryへのエクスポートとファイルのエクスポートの２つの方法が提示されます
いずれかを選択して有効にします
今回はBigQueryを選択して、[設定を編集]をクリックし、エクスポート先を定義します
この例では、BigQueryデータセットを定義する必要があるので、そのデータセットを設定して[保存]をクリックします
ファイルにエクスポートする場合も、同様に[設定を編集]をクリックします
データはCSVまたはJSONファイルとして、エクスポートされ、Cloud Storageバケットに保存されます
ここで名前を定義できますが、先にバケットを作成します
次に接頭辞を指定すると、データがエクスポートされます
もう一つ紹介したいのは[お支払い方法]です
クリックすると、お支払いアカウントやお支払いプロファイル、クレジットカード払いか銀行口座での支払いかなど、あらゆる情報を確認できます
このようにGCPで簡単に請求を管理できます
請求管理者は、アカウントを設定してレポートを実行できます
これらは日常的な作業なので、利用可能なオプションを把握して、その実行方法を知ることで混乱を避けられます
たとえばレポートをJSONまたはCSV形式で、生成できることがわりました
次のラボでは、エクスポートした課金データに、高度な処理やフィルタリングを適用する方法を学習します
