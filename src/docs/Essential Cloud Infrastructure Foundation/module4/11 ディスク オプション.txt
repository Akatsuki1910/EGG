この時点でOSの選択は完了していますが、このOSはなんらかのディスクに格納することになりますので、ディスクオプションを見ていきましょう
それぞれのVMに１個のルート永続ディスクが付属しており、選択したベースイメージはこのディスクに読み込まれます
このイメージはVMにアタッチしてVMから起動できるという意味では起動可能、VMの終了後も存続できるという意味では永続です
VMの削除後もブートディスクを存続させるには、インスタンスのプロパティで、[インスタンスを削除する際にブートディスクを削除する]をオフにします
すでに触れたようにディスクタイプにはいろいろあります
詳しく見ていきましょう
最初に作成するディスクは、“永続ディスク”と呼ばれるものです
ネットワークインターフェースを介して、VMにアタッチされます
永続と言っても物理的にマシンにアタッチされるわけではありません
このディスクとコンピューティングの分離により、VMの終了後もディスクが存続できます
ディスクのスナップショットを実行することもできます
後で詳しく説明する増分バックアップです
HDDディスクとSSDディスクのどちらを選ぶかは、費用とパフォーマンスのどちらを優先するかによります
ディスクのパフォーマンスと、ディスクサイズに応じたスケーリングの詳細は、この動画のリンクセクションをご覧ください
永続ディスクのもう一つの優れた機能は、ディスクが実行中でもVMにアタッチされていても動的にサイズを変更できることです
複数のVMに読み取り専用モードでディスクをアタッチすることもできます
これによって複数のインスタンス間で静的データを共有できるため、各インスタンスのそれぞれのディスクにデータを複製するよりも、費用を抑えられます
ゾーン永続ディスクは効率的で信頼性の高いブロックストレージを提供します
リージョン永続ディスクは同じリージョン内の２つのゾーン間で、アクティブ/アクティブディスクレプリケーションを可能にし、ゾーン間で同期レプリケーションされる耐久性の高いストレージを提供します
高可用性も必要とする高パフォーマンスDBや、エンタープライズアプリに適したオプションです
ゾーン永続ディスクまたはリージョン永続ディスクを構成する場合は、次のいずれかのディスクタイプを選択できます
標準永続ディスク、標準HDDを基盤とするディスクです
バランス永続ディスク、SSDを基盤とするディスクです
パフォーマンスと費用のバランスが取れたディスクとして、SSD永続ディスクの代わりに使用できます
SSD永続ディスク、SSDを基盤とするディスクです
Compute Engineはすべての保存データをデフォルトで暗号化します
暗号化の処理と管理はGoogle Cloudで自動的に行われるため、ユーザーによる操作は不要です
自身でこの暗号化を制御および管理したい場合は、Cloud Key Management Serviceを使用して、鍵暗号鍵を作成、管理するか、独自の鍵暗号鍵を作成して管理できます
次にローカルSSDは永続ディスクと異なり、VMに物理的にアタッチされます
そのためこれらのディスクはエフェメラルですが、非常に高いIOPSを実現します
最新の数値についてはドキュメントをご覧ください
現在のところ375GBのローカルSSDディスクを８個までアタッチできます
合計３TBです
これらのディスク上のデータは、リセット後も保持されますが、VMを停止または終了すると消去されます
別のVMにディスクを再アタッチすることができないためです
RAMディスクを使用することもできます
tmpfsを使用するだけで、メモリにデータを保存できます
必要なデータ構造が小さい場合は最も高速のパフォーマンスを得られる方法です
RAMデータをバックアップする永続ディスクとともに、こうした機能の活用が必要な場合は、ハイメモリVMの利用をおすすめします
各種ディスクオプションについてまとめます
永続ディスクは再起動とスナップショットの作成が可能ですが、ローカルSSDとRAMディスクはエフェメラルです
パフォーマンスではなく単に容量が必要な場合は、永続HDDディスクをおすすめします
高いパフォーマンスが必要な場合は、SSDのオプションを検討してください
永続ディスクのデータは複数の物理ディスクに分散されるので、データの冗長性が確保されます
ローカルSSDではパフォーマンスがさらに高くなりますが、データの冗長性はありません
最後のRAMディスクは非常に揮発性が高いものの、パフォーマンスは最も高くなります
VMにアタッチできるローカルSSDの数に上限があるように、VMにアタッチできる永続ディスクの数にも上限があります
この表に示すように、上限はマシンタイプによって異なります
共有コアマシンタイプの場合は最大16個のディスクをアタッチできます
標準、ハイメモリ、ハイCPU、メモリ最適化、コンピューティング最適化マシンタイプの場合は最大128個のディスクをアタッチできます
したがって単一のホストで大容量を確保できます
コアの数によって、スループットが制限されるという話をしましたが、そのスループットもディスクI/Oと同じ帯域幅を共有します
このため大量のディスクI/Oスループットが見込まれる場合は、ネットワークの下り（外向き）または上り（内向き）スループットとも競合します
したがって、VMにアタッチするドライブの数を増やす場合は特に注意してください
コンピュータの物理ハードディスクと、基本的に仮想ネットワークデバイスである永続ディスクの間には多くの違いがあります
第一に通常のコンピュータのハードウェアディスクは、パーティショニングする必要があります
基本的には１台のドライブをセクション分けして、OSの容量を確保します
容量を増やす場合は再パーティショニングが必要です
変更を加える場合は再フォーマットが必要な場合もあります
冗長性が必要な場合は冗長ディスクアレイを作成します
暗号化は、ファイルをディスクに書き込む前に行います
クラウド永続ディスクの場合は大きく異なり、このような管理のすべてがバックエンドで自動的に処理されます
ディスクは仮想ネットワークデバイスであるため、容量の追加やファイルシステムのサイズ変更が簡単です
冗長性とスナップショットサービスが組み込まれており、ディスクは自動的に暗号化されます
独自の鍵を使用することもできるので、第三者によるデータの取得を確実に防ぐことができます
