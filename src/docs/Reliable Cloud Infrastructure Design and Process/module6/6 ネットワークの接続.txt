Google Cloudのネットワーク接続プロダクトのピアリング、Cloud VPN、Cloud Interconnectに注目します
２つのVPCネットワークを接続する場合、VPCピアリングを検討します
VPCピアリングでは２つのネットワーク間で、RFC1918のプライベート接続が可能です
同じプロジェクトまたは同じ組織に属しているかは関係ありません
各VPCネットワークには、許可または拒否するトラフィックを定義するファイアウォールルールがあります
この図が示すVPCピアリングは、別々のプロジェクトおよび組織に属する２つのネットワーク間の接続です
サブネット範囲は重複していません
これは接続を確立するための要件です
接続に関して言うと、各VPCネットワークの管理者は確立する接続のVPCピアリングのリクエストを構成する必要があります
VPCをオンプレミスまたは他のクラウドのネットワークと接続する場合、Cloud VPNを検討します
Cloud VPNは２つのネットワークをIPsec VPNトンネルで安全に接続します
トラフィックは、一方のVPNゲートウェイで暗号化されもう一方で復号されるので、公共インターネットを通るデータが保護されます
そのため、Cloud VPNは少量のデータ接続に適しています
特に３Gbpsまでが適しています
この図は、VPCとオンプレミスネットワーク間のVPN接続を示すものです
VPCネットワークには、us-east1とus-west1にサブネットがあり、各リージョンにGoogle Cloudリソースがあります
ネットワーク内のルーティングは、自動的に構成されるため、ファイアウォールルールで通信が許可されていればリソースは内部IPアドレスを使って通信できます
このVPN設定はClassic VPNと呼ばれ、月間稼働率99.9%のSLAを実現します
Classic VPNゲートウェイには１つのインターフェースと１つの外部IPがあり、静的または動的ルーティング（BGPなど）を使うトンネルに対応しています
月間稼働率99.99%のSLAを確保するために、高可用性（HA）VPNも構成できます
HA VPNでは、ネットワークインターフェース２つと外部IP２つがオンプレミスに必要です
このトポロジでは、１つのHA Cloud VPNゲートウェイが２つのピアデバイスに接続します
各ピアデバイスに１つのインターフェースと１つの外部IPがあります
ゲートウェイは２つのトンネルを使います
ピアデバイスごとに１つです
これにより一方のデバイスの障害から守られ、デバイスの個別アップグレードも可能です
Cloud VPNでは、静的ルートと動的ルートがサポートされます
動的ルートを使用するには、Cloud Routerを構成する必要があります
Cloud RouterではBGPを使用してCloud VPNトンネルのルートを管理できます
このルーティング方法を使用すると、ルートの更新や交換をトンネル構成を変更せずに行えます
これにより、新しいサブネット、たとえばVPCのステージングやピアネットワークのラック30などをシームレスにアドバタイズできます
ネットワーク間に専用の高速接続が必要な場合は、Cloud Interconnectを検討します
Cloud Interconnectには、オンプレミス拡張オプションがあります
Dedicated InterconnectとPartner Interconnectです
Dedicated Interconnectはコロケーション施設への直接接続を提供します
コロケーション施設は10Gbpsまたは100Gbpsの回路のサポートが必要で、専用接続で最大８つの10Gbps接続、または２つの100Gbps接続をバンドルして最大200Gbpsを実現できます
Partner Interconnectはサービスプロバイダを介して接続を提供します
最低50Mbpsの低い帯域幅の要件の場合に適しています
どちらの場合も、内部IP空間を使ってVPCリソースにアクセスできます
限定公開のGoogleアクセスを構成し、オンプレミスホストでプライベートIPを使ってGoogleサービスに接続するようにもできます
Dedicated Interconnectを使用するには、共通のコロケーション施設でGoogleネットワークと自社ルーターの相互接続をプロビジョニングします
ネットワーク間でのルート交換には、Cloud Routerとオンプレミスルーター間の相互接続にBGPセッションを構成します
これによりオンプレミスとVPC上のネットワークのリソース間で、トラフィックを送受信できます
Partner InterconnectはオンプレミスとVPC間の接続をサポートされているプロバイダ経由で提供します
Dedicated Interconnectのコロケーション施設に到達できない場所にデータセンターがある場合や、Dedicated Interconnectを要さない場合に適しています
