ロードバランサについて説明します
グローバルロードバランサにより、複数のリージョンのサービスに接続できます
スライドのロードバランサは、異なるリージョンの２つのインスタンスグループのバックエンドで構成されています
Cloud Load Balancingを使って、これらのグループ間で負荷を分散させます
グローバルなロードバランシングは、Google Cloud内のHTTPロードバランサ、TCP、SSLプロキシがサポートします
HTTPロードバランサの場合、グローバルエニーキャストIPアドレスを使ってDNS検索を簡素化できます
既定では、リクエストはリクエスト元に最も近いリージョンに送られます
単一リージョンのサービスではリージョンロードバランサを使用します
この図が示すのは、単一リージョンにデプロイされたリソースとそれらにリクエストを転送するCloud Load Balancingです
リージョンロードバランサはHTTPと任意のTCP/UDPポートをサポートします
ロードバランサがパブリックIPを持つ場合、トラフィックはおそらくインターネットを通るためSSLでの保護がおすすめです
右の画像のように、SSLはHTTPとTCPロードバランサで使用できます
その際はセルフマネージドSSL証明書か、GoogleマネージドSSL証明書を使用できます
HTTP(S)、負荷分散を使用している場合、Cloud CDNを利用してレイテンシの短縮と外向き費用の削減を図ります
Cloud CDNの有効化は、グローバルHTTP(S)、ロードバランサ構成時にチェックを付けるだけです
Cloud CDNは、エッジキャッシングロケーションを使って世界中でコンテンツをキャッシュに保存します
コンテンツはリクエストしたユーザーに最も近いキャッシュに保存されます
データのキャッシュ元はさまざまで、Compute Engineインスタンス、GKE Pod、Cloud Storageバケットなどがあります
Google Cloudロードバランサについての考察をまとめ、種類と機能を整理します
ロードバランサは内部または外部のIPアドレスを使用できます
外部IPアドレスをインターネット接続と呼びます
ロードバランサは単一または複数のリージョンに対応できます
HTTP、TCP、UDPトラフィックをサポートします
まずはトラフィックの種類から復習しましょう
HTTP(S)、ロードバランシングはレイヤ７のロードバランサです
HTTP/2を含むHTTPおよびHTTPSをサポートします
リージョンとグローバルに加え、インターネット接続と内部ロードバランシングに対応します
TCPロードバランシングはレイヤ４のバランシングまたはプロキシをTCP/SSLプロトコルが必要なアプリに提供します
TCPロードバランサやTCPまたはSSLプロキシを構成できます
リージョンとグローバルに加え、インターネット接続と内部ロードバランシングに対応します
UDPロードバランシングはプロトコルにUDPを使うアプリ用です
インターネット接続と内部ロードバランシングに対応しますが、リージョントラフィックのみです
VPCネットワーク設計に関する考察として、Network Intelligence Centerにも触れます
これはGoogle Cloudのサービスであり、VPCネットワークトポロジを可視化しネットワーク接続をテストできます
左側の図が示すネットワークトポロジでは、外部クライアントが３つのリージョンにあり、トラフィックが外部ロードバランサ経由でus-central1に転送されています
このサービスが特に役立つのは、ネットワークの構成や診断の際にネットワークトポロジを確認するときです
右側の図が示すのは送信元と送信先の間の接続テストの構成と、プロトコルおよびポートです
テストを実行できるのは、VPCネットワークの送信元と送信先エンドポイントの間、VPCネットワークとインターネットの間、VPCネットワークとオンプレミスネットワークの間です
