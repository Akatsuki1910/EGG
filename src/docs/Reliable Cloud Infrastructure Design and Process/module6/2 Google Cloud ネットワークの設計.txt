まずGoogle Cloudのネットワークとロードバランサの設計です
Googleには世界中のリージョンのネットワークがあります
この高帯域幅インフラを使用して、要件に合うクラウドネットワークを設計できます
ロケーション、ユーザー数、拡張性、耐障害性、レイテンシなどの要件です
詳しく見てみましょう
これはGoogle Cloudの広がりを表す地図です
Google Cloudを構成するものは、青いアイコンのリージョン、灰色の点のポイントオブプレゼンス（PoP）、青い線のグローバルプライベートネットワーク、そしてサービスです
リージョンとはリソースを運用できる特定の地理的なロケーションです
この地図は稼働中と将来追加されるリージョン、およびそのゾーンを示しています
この録画の時点で21のリージョンと64のゾーンがあります
PoPは、ネットワークが他のインターネットに接続している場所です
Google Cloudでピアの近くにトラフィックを運べるのは、相互接続点を含むグローバルネットワークを運用しているからです
これにより、費用削減とユーザーエクスペリエンス向上を実現しています
リージョンとPoPを接続するネットワークは光ファイバーで構成されています
海底ケーブルへの投資で実現しています
Google Cloud内のVPCネットワークはグローバルです
リージョンごとに１つのサブネットを持つ自動モードネットワークを作成することも、カスタムモードネットワークを作成しサブネットを作成するリージョンを指定することもできます
複数リージョン間のリソースは相互接続を追加せずに内部IPで通信できます
右の図では、別々のリージョンにある２つのサブネットそれぞれにサーバーが１台あります
同じVPCネットワークに接続しているため、内部IPアドレスを使用した相互通信が可能です
サブネットを作成するリージョンは要件に応じて選択します
グローバル企業なら世界中のリージョンにサブネットワークを作成する場合が多いでしょう
ユーザーが特定のリージョン内にいる場合、最も近いリージョンのサブネット１つと近接するバックアップリージョンのみを選択することが適切な場合もあります
プロジェクトごとにネットワークを複数使えます
これらのネットワークはリージョンのサブネットの集まりです
カスタムサブネットを作成するには、リージョンと内部IP範囲を指定します
右の画像を参照してください
サブネットのIP範囲は、単一のCIDRブロックから取得する必要はありませんが、同じVPCネットワークの他のサブネットと重複することはできません
これはプライマリとセカンダリの範囲に適用されます
セカンダリ範囲では、エイリアスIPを定義できます
サブネットのプライマリIPアドレス空間は拡張できます
ワークロードのシャットダウンや、ダウンタイムは発生しません
サブネットを定義したら、同じVPCネットワーク内のマシンは接続しているサブネットに関係なく内部IPアドレスを使って相互に通信できます
単一のVMが複数のネットワークインターフェースで別々のVPCネットワークに接続できます
この図はCompute Engineインスタンスの例で、本番環境、テスト、インフラ、送信の４つの異なるネットワークに接続しています
VMには最低１個のネットワークインターフェースが必要で、インスタンスの種類とvCPUの数に応じて最大８個まで持つことができます
vCPUの数が多いほど、インターフェースも増やせます
インスタンスの作成時に全インターフェースを作成する必要があり、それぞれが別々のネットワークに接続する必要があります
共有VPCを使うと、１つの組織の複数のプロジェクトのリソースを共通のVPCネットワークに接続できます
リソースはそのネットワークの内部IPを使って、安全かつ効率的に相互通信できます
この図が示すのは、A、B、Cの３つのサービスプロジェクトが共有VPCを使用するシナリオです
各プロジェクトに共有VPCに接続するVMインスタンスがあります
共有VPCはマルチプロジェクトネットワークの集中型アプローチです
指定した単一のVPCで、セキュリティとネットワークポリシーが適用されます
開発者のネットワーク管理者権限を削除できるため、得意分野に専念させることができます
組織のネットワーク管理者は、サブネット、ファイアウォールルール、ルートなどを管理する一方、インスタンスなどのリソース作成の管理をプロジェクト管理者や開発者に委任します
