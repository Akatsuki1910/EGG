プロジェクトはインフラリソースを管理するための中核的オブジェクトであり、リソースを請求先アカウントに関連付けます
リソースはプロジェクト内でのみ作成および消費できます
そのためにプロジェクトによって関連リソースを互いに分離します
これからプロジェクトの作成、削除とプロジェクト間の切り替えのデモを行います
一部の操作はセキュリティ制限により、Qwiklabs環境では実行できないため、私の環境で行います
GCP Consoleでトライアルアカウントを使用しています
ご自身でトライアルアカウントを作成して、デモの手順に従うこともできます
まず、プロジェクトを作成します
プロジェクト名をクリックします
上にある新規プロジェクトを作成するためのアイコンをクリックします
ここで必要なのはプロジェクト名を定義することです
“My new project”という名前にします
一意のプロジェクトIDが自動的に作成されるという説明が出ました
入力した名前は一意ではないためです
この設定で[作成]をクリックします
プロジェクトが作成中であることがここに示されています
この通知ペインで進行状況を追うことができます
新しいプロジェクトを作成した時点では、一部のサービスはまだ利用可能でない場合があります
新しいプロジェクトが作成されたので、プロジェクトを切り替えます
そのために、[ホーム]に移動します
ここにプロジェクトが表示されています
ここから[プロジェクトの設定]に移動できます
シャットダウンすることも別のプロジェクトに切り替えることもできます
この新しく作成したプロジェクトに切り替えます
このページでプロジェクトをシャットダウンする手順を説明します
[シャットダウン]をクリックすると、この操作によって起こる内容が示されて続行するかを確認されます
具体的には、課金とトラフィックの処理が停止します
ただし、操作を取り消す場合に備えて実際にはシャットダウンは30日後に行われます
プロジェクトIDの再入力が必要なので、IDをコピーして貼り付けてから[シャットダウン]をクリックします
これで通知が出て、シャットダウンされる日時が示されます
確認して[OK]をクリックします
シャットダウンがスケジュールされました
ここに戻って、プロジェクトをクリックして自動的に移動することも[ホーム]に移動してこのオプションから、移動先のプロジェクトを選ぶこともできます
さまざまな方法がありますが、これをクリックしてプロジェクトを選択します
次は、Cloud Shellでプロジェクトを切り替える方法をお見せします
そのために別のプロジェクトを作成します
“My second project”と名付けます
[作成]をクリックするとバックグラウンドで自動的に起動されます
Cloud Shellを使用するため、右上の[Cloud Shellをアクティブにする]をクリックします
このユーザーで前にCloud Shellを使ったので、起動確認のメッセージはありません
Cloud Shellをしばらく使っていなかったので、ディスクのアーカイブ解除に少し時間がかかると通知されます
これが完了したら、gcloud config listコマンドを使用します
コマンドを貼り付けて実行し、現在の構成に関する詳細を出力します
出力には現在選択しているプロジェクトが含まれているはずです
ここに示されているプロジェクトが現在作業中のプロジェクトです
ここにコマンドを貼り付けますが、別のコマンドをコピーしてしまったので、“gcloud config list”と手入力します
このように詳細が出力されます
ここでgrepコマンドを使用すれば、直接プロジェクトを取得できます
これが現在使用しているプロジェクトです
GCP Consoleのフォーカスをこの新しいプロジェクトに切り替えることもできます
その後、このコマンドを再実行します
Cloud Shellのフォーカスはまだ別のプロジェクトに置かれています
切り替え方法の一つとして、プロジェクトIDを環境変数に格納できます
環境変数を設定すれば、柔軟に切り替えられます
プロジェクトIDがここにあるので、これを環境変数に格納します
変数名を“Project_ID_1”とします
プロジェクトIDを確認します
これをコピーして、ここに貼り付けます
格納されたのでgcloud config set projectを使用して、プロジェクトIDを変更するアクションを定義します
ご覧のように別のプロジェクトIDがリストされています
これを確認したうえで、先ほどと同じgcloud config listコマンドを使用してプロジェクトをグラブします
これでプロジェクトが切り替わりました
このように、プロジェクトの作成、削除、切り替えを簡単に行うことができます
